


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>deepsparse package &mdash; deepsparse 0.1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="_static/pygments.css" type="text/css" /> -->
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="deepsparse.utils package" href="deepsparse.utils.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

  <!-- Preload the theme fonts -->

<link rel="preload" href="_static/fonts/FreightSans/freight-sans-book.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/FreightSans/freight-sans-medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/IBMPlexMono/IBMPlexMono-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/FreightSans/freight-sans-bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/FreightSans/freight-sans-medium-italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/IBMPlexMono/IBMPlexMono-SemiBold.woff2" as="font" type="font/woff2" crossorigin="anonymous">

<!-- Preload the katex fonts -->

<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Caligraphic-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
</head>

<div class="container-fluid header-holder tutorials-header" id="header-holder">
  <div class="container">
    <div class="header-container">
      <a class="header-logo" href="https://github.com/mpariente/asteroid" aria-label="PyTorch">
       <!-- <img class="call-to-action-img" src="_static/images/asteroid_logo_dark.png"/> -->
      </a>

      <div class="main-menu">
        <ul>
          <li>
            <a href="https://pytorch.org/get-started">Get Started</a>
          </li>

          <li>
            <a href="https://pytorch.org/blog/">Blog</a>
          </li>

          <li>
            <a href="https://pytorch.org/tutorials">Tutorials</a>
          </li>

          <li>
            <a href="https://pytorch.org/docs/stable/index.html">Docs</a>
          </li>

          <li>
            <div class="resources-dropdown">
              <a id="resourcesDropdownButton" data-toggle="resources-dropdown">
                Resources
              </a>
              <div class="resources-dropdown-menu">
                <a class="nav-dropdown-item" href="https://pytorch.org/resources"">
                  <span class=dropdown-title>Developer Resources</span>
                  <p>Find resources and get questions answered</p>
                </a>
                <!--
                <a class="nav-dropdown-item" href="https://pytorch.org/features">
                  <span class=dropdown-title>About</span>
                  <p>Learn about PyTorch’s features and capabilities</p>
                </a>
                -->
              </div>
            </div>
          </li>

          <li>
            <a href="https://github.com/mpariente/asteroid">Github</a>
          </li>
        </ul>
      </div>

      <a class="main-menu-open-button" href="#" data-behavior="open-mobile-menu"></a>
    </div>

  </div>
</div>


<body class="pytorch-body">

   

    

    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <nav data-toggle="wy-nav-shift" class="pytorch-left-menu" id="pytorch-left-menu">
      <div class="pytorch-side-scroll">
        <div class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <div class="pytorch-left-menu-search">
            

            
              
              
            

            


  


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

            
          </div>

          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="deepsparse.utils.html">deepsparse.utils package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <div class="pytorch-container">
      <div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
        <div class="pytorch-breadcrumbs-wrapper">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="pytorch-breadcrumbs">
    
      <li>
        <a href="#">
          
            Docs
          
        </a> &gt;
      </li>

        
      <li>deepsparse package</li>
    
    
      <li class="pytorch-breadcrumbs-aside">
        
            
            <a href="_sources/deepsparse.rst.txt" rel="nofollow"><img src="_static/images/view-page-source-icon.svg"></a>
          
        
      </li>
    
  </ul>

  
</div>
        </div>

        <div class="pytorch-shortcuts-wrapper" id="pytorch-shortcuts-wrapper">
          Shortcuts
        </div>
      </div>

      <section data-toggle="wy-nav-shift" id="pytorch-content-wrap" class="pytorch-content-wrap">
        <div class="pytorch-content-left">

        
          
          <div class="rst-content">
          
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
             <article itemprop="articleBody" id="pytorch-article" class="pytorch-article">
              
  <div class="section" id="deepsparse-package">
<h1>deepsparse package<a class="headerlink" href="#deepsparse-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="deepsparse.utils.html">deepsparse.utils package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="deepsparse.utils.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="deepsparse.utils.html#module-deepsparse.utils.data">deepsparse.utils.data module</a></li>
<li class="toctree-l2"><a class="reference internal" href="deepsparse.utils.html#module-deepsparse.utils.log">deepsparse.utils.log module</a></li>
<li class="toctree-l2"><a class="reference internal" href="deepsparse.utils.html#module-deepsparse.utils.onnx">deepsparse.utils.onnx module</a></li>
<li class="toctree-l2"><a class="reference internal" href="deepsparse.utils.html#module-deepsparse.utils">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-deepsparse.benchmark">
<span id="deepsparse-benchmark-module"></span><h2>deepsparse.benchmark module<a class="headerlink" href="#module-deepsparse.benchmark" title="Permalink to this headline">¶</a></h2>
<p>Code related to benchmarking batched inference runs</p>
<dl class="py class">
<dt id="deepsparse.benchmark.BatchBenchmarkResult">
<em class="property">class </em><code class="sig-prename descclassname">deepsparse.benchmark.</code><code class="sig-name descname">BatchBenchmarkResult</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time_start</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">time_end</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">batch_size</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">inputs</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>None<span class="p">, </span>List<span class="p">[</span>numpy.ndarray<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">outputs</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>None<span class="p">, </span>List<span class="p">[</span>numpy.ndarray<span class="p">]</span><span class="p">, </span>Dict<span class="p">[</span>str<span class="p">, </span>numpy.ndarray<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extras</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Any<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/deepsparse/benchmark.html#BatchBenchmarkResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepsparse.benchmark.BatchBenchmarkResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A benchmark result for a batched inference run</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_start</strong> – The system time when the run for the batch was started</p></li>
<li><p><strong>time_end</strong> – The system time when the run for the batch ended</p></li>
<li><p><strong>batch_size</strong> – The size of the batch that was benchmarked</p></li>
<li><p><strong>inputs</strong> – Optional batch inputs that were given for the run</p></li>
<li><p><strong>outputs</strong> – Optional batch outputs that were given for the run</p></li>
<li><p><strong>extras</strong> – Optional batch extras to store any other data for the run</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="deepsparse.benchmark.BatchBenchmarkResult.batch_size">
<em class="property">property </em><code class="sig-name descname">batch_size</code><a class="headerlink" href="#deepsparse.benchmark.BatchBenchmarkResult.batch_size" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The size of the batch that was benchmarked</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BatchBenchmarkResult.batches_per_second">
<em class="property">property </em><code class="sig-name descname">batches_per_second</code><a class="headerlink" href="#deepsparse.benchmark.BatchBenchmarkResult.batches_per_second" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The number of batches that could be run in one second
based on this result</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BatchBenchmarkResult.extras">
<em class="property">property </em><code class="sig-name descname">extras</code><a class="headerlink" href="#deepsparse.benchmark.BatchBenchmarkResult.extras" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Batch extras to store any other data for the run</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BatchBenchmarkResult.inputs">
<em class="property">property </em><code class="sig-name descname">inputs</code><a class="headerlink" href="#deepsparse.benchmark.BatchBenchmarkResult.inputs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Batch inputs that were given for the run, if any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BatchBenchmarkResult.items_per_second">
<em class="property">property </em><code class="sig-name descname">items_per_second</code><a class="headerlink" href="#deepsparse.benchmark.BatchBenchmarkResult.items_per_second" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The number of items that could be run in one second
based on this result</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BatchBenchmarkResult.ms_per_batch">
<em class="property">property </em><code class="sig-name descname">ms_per_batch</code><a class="headerlink" href="#deepsparse.benchmark.BatchBenchmarkResult.ms_per_batch" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The number of milliseconds it took to run the batch</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BatchBenchmarkResult.ms_per_item">
<em class="property">property </em><code class="sig-name descname">ms_per_item</code><a class="headerlink" href="#deepsparse.benchmark.BatchBenchmarkResult.ms_per_item" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The averaged number of milliseconds it took to run each item
in the batch</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BatchBenchmarkResult.outputs">
<em class="property">property </em><code class="sig-name descname">outputs</code><a class="headerlink" href="#deepsparse.benchmark.BatchBenchmarkResult.outputs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Batch outputs that were given for the run, if any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BatchBenchmarkResult.time_elapsed">
<em class="property">property </em><code class="sig-name descname">time_elapsed</code><a class="headerlink" href="#deepsparse.benchmark.BatchBenchmarkResult.time_elapsed" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The time elapsed for the entire run (end - start)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BatchBenchmarkResult.time_end">
<em class="property">property </em><code class="sig-name descname">time_end</code><a class="headerlink" href="#deepsparse.benchmark.BatchBenchmarkResult.time_end" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The system time when the run for the batch ended</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BatchBenchmarkResult.time_start">
<em class="property">property </em><code class="sig-name descname">time_start</code><a class="headerlink" href="#deepsparse.benchmark.BatchBenchmarkResult.time_start" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The system time when the run for the batch was started</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="deepsparse.benchmark.BenchmarkResults">
<em class="property">class </em><code class="sig-prename descclassname">deepsparse.benchmark.</code><code class="sig-name descname">BenchmarkResults</code><a class="reference internal" href="_modules/deepsparse/benchmark.html#BenchmarkResults"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></p>
<p>The benchmark results for a list of batched inference runs</p>
<dl class="py method">
<dt id="deepsparse.benchmark.BenchmarkResults.append_batch">
<code class="sig-name descname">append_batch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time_start</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">time_end</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">batch_size</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">inputs</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>None<span class="p">, </span>List<span class="p">[</span>numpy.ndarray<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">outputs</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>None<span class="p">, </span>List<span class="p">[</span>numpy.ndarray<span class="p">]</span><span class="p">, </span>Dict<span class="p">[</span>str<span class="p">, </span>numpy.ndarray<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extras</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Any<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/deepsparse/benchmark.html#BenchmarkResults.append_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults.append_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a recorded batch to the current results</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_start</strong> – The system time when the run for the batch was started</p></li>
<li><p><strong>time_end</strong> – The system time when the run for the batch ended</p></li>
<li><p><strong>batch_size</strong> – The size of the batch that was benchmarked</p></li>
<li><p><strong>inputs</strong> – Optional batch inputs that were given for the run</p></li>
<li><p><strong>outputs</strong> – Optional batch outputs that were given for the run</p></li>
<li><p><strong>extras</strong> – Optional batch extras to store any other data for the run</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BenchmarkResults.batch_sizes">
<em class="property">property </em><code class="sig-name descname">batch_sizes</code><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults.batch_sizes" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the list of all batch run sizes that have been added</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BenchmarkResults.batch_times">
<em class="property">property </em><code class="sig-name descname">batch_times</code><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults.batch_times" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the list of all batch run times that have been added</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BenchmarkResults.batch_times_mean">
<em class="property">property </em><code class="sig-name descname">batch_times_mean</code><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults.batch_times_mean" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the mean of all the batch run times that have been added</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BenchmarkResults.batch_times_median">
<em class="property">property </em><code class="sig-name descname">batch_times_median</code><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults.batch_times_median" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the median of all the batch run times that have been added</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BenchmarkResults.batch_times_std">
<em class="property">property </em><code class="sig-name descname">batch_times_std</code><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults.batch_times_std" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the standard deviation of all the batch run times that have been added</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BenchmarkResults.batches_per_second">
<em class="property">property </em><code class="sig-name descname">batches_per_second</code><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults.batches_per_second" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The number of batches that could be run in one second
based on this result</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BenchmarkResults.inputs">
<em class="property">property </em><code class="sig-name descname">inputs</code><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults.inputs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Batch inputs that were given for the run, if any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BenchmarkResults.items_per_second">
<em class="property">property </em><code class="sig-name descname">items_per_second</code><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults.items_per_second" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The number of items that could be run in one second
based on this result</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BenchmarkResults.ms_per_batch">
<em class="property">property </em><code class="sig-name descname">ms_per_batch</code><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults.ms_per_batch" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The number of milliseconds it took to run the batch</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BenchmarkResults.ms_per_item">
<em class="property">property </em><code class="sig-name descname">ms_per_item</code><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults.ms_per_item" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The averaged number of milliseconds it took to run each item
in the batch</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BenchmarkResults.num_batches">
<em class="property">property </em><code class="sig-name descname">num_batches</code><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults.num_batches" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the number of batches that have been added</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BenchmarkResults.num_items">
<em class="property">property </em><code class="sig-name descname">num_items</code><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults.num_items" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the number of items across all batches that have been added</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BenchmarkResults.outputs">
<em class="property">property </em><code class="sig-name descname">outputs</code><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults.outputs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Batch outputs that were given for the run, if any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.benchmark.BenchmarkResults.results">
<em class="property">property </em><code class="sig-name descname">results</code><a class="headerlink" href="#deepsparse.benchmark.BenchmarkResults.results" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the list of recorded batch results</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-deepsparse.cpu">
<span id="deepsparse-cpu-module"></span><h2>deepsparse.cpu module<a class="headerlink" href="#module-deepsparse.cpu" title="Permalink to this headline">¶</a></h2>
<p>code related to detecting the details of the currently available cpu</p>
<dl class="py function">
<dt id="deepsparse.cpu.cpu_details">
<code class="sig-prename descclassname">deepsparse.cpu.</code><code class="sig-name descname">cpu_details</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>int<span class="p">, </span>str<span class="p">, </span>bool<span class="p">]</span><a class="reference internal" href="_modules/deepsparse/cpu.html#cpu_details"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepsparse.cpu.cpu_details" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect the CPU details on linux systems
If any other OS is used, will raise an exception</p>
<dl class="simple">
<dt>Specifically:</dt><dd><ul class="simple">
<li><p>the number of physical cores available per socket on the system</p></li>
<li><p>detects the vector instruction set available (avx2, avx512)</p></li>
<li><p>if vnni is available</p></li>
</ul>
</dd>
</dl>
<p>NM_ARCH environment variable can be used to override the avx instruction set detection</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a tuple containing the detected cpu information
(number of physical cores per socket, avx instruction set, vnni support)</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-deepsparse.engine">
<span id="deepsparse-engine-module"></span><h2>deepsparse.engine module<a class="headerlink" href="#module-deepsparse.engine" title="Permalink to this headline">¶</a></h2>
<p>Code related to interfacing with a Neural Network in the DeepSparse Engine using python</p>
<dl class="py class">
<dt id="deepsparse.engine.Engine">
<em class="property">class </em><code class="sig-prename descclassname">deepsparse.engine.</code><code class="sig-name descname">Engine</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>sparsezoo.objects.model.Model<span class="p">, </span>sparsezoo.objects.file.File<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">batch_size</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">num_cores</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/deepsparse/engine.html#Engine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepsparse.engine.Engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Create a new DeepSparse Engine that compiles the given onnx file
for GPU class performance on commodity CPUs.</p>
<p>Note 1: Engines are compiled for a specific batch size and
for a specific number of CPU cores.</p>
<p>Note 2: multi socket support is not yet built in to the Engine,
all execution assumes single socket</p>
<div class="line-block">
<div class="line">Example:</div>
<div class="line-block">
<div class="line"># create an engine for batch size 1 on all available cores</div>
<div class="line">engine = Engine(“path/to/onnx”, batch_size=1, num_cores=None)</div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – Either a path to the model’s onnx file, a sparsezoo Model object,
or a sparsezoo ONNX File object that defines the neural network</p></li>
<li><p><strong>batch_size</strong> – The batch size of the inputs to be used with the engine</p></li>
<li><p><strong>num_cores</strong> – The number of physical cores to run the model on.
Pass None or 0 to run on the max number of cores
in one socket for the current machine, default None</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="deepsparse.engine.Engine.batch_size">
<em class="property">property </em><code class="sig-name descname">batch_size</code><a class="headerlink" href="#deepsparse.engine.Engine.batch_size" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The batch size of the inputs to be used with the model</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.engine.Engine.benchmark">
<code class="sig-name descname">benchmark</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inp</span><span class="p">:</span> <span class="n">List<span class="p">[</span>numpy.ndarray<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">num_iterations</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">20</span></em>, <em class="sig-param"><span class="n">num_warmup_iterations</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">5</span></em>, <em class="sig-param"><span class="n">include_inputs</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">include_outputs</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#deepsparse.benchmark.BenchmarkResults" title="deepsparse.benchmark.BenchmarkResults">deepsparse.benchmark.BenchmarkResults</a><a class="reference internal" href="_modules/deepsparse/engine.html#Engine.benchmark"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepsparse.engine.Engine.benchmark" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience function for quickly benchmarking the instantiated model
on a given input in the DeepSparse Engine.
After executing, will return the summary statistics for benchmarking.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inp</strong> – The list of inputs to pass to the engine for benchmarking.
The expected order is the inputs order as defined in the ONNX graph.</p></li>
<li><p><strong>num_iterations</strong> – The number of iterations to run benchmarking for.
Default is 20</p></li>
<li><p><strong>num_warmup_iterations</strong> – T number of iterations to warm up engine before
benchmarking. These executions will not be counted in the benchmark
results that are returned. Useful and recommended to bring
the system to a steady state. Default is 5</p></li>
<li><p><strong>include_inputs</strong> – If True, inputs from forward passes during benchmarking
will be added to the results. Default is False</p></li>
<li><p><strong>include_outputs</strong> – If True, outputs from forward passes during benchmarking
will be added to the results. Default is False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the results of benchmarking</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.engine.Engine.benchmark_loader">
<code class="sig-name descname">benchmark_loader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">loader</span><span class="p">:</span> <span class="n">Iterable<span class="p">[</span>List<span class="p">[</span>numpy.ndarray<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">num_iterations</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">20</span></em>, <em class="sig-param"><span class="n">num_warmup_iterations</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">5</span></em>, <em class="sig-param"><span class="n">include_inputs</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">include_outputs</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#deepsparse.benchmark.BenchmarkResults" title="deepsparse.benchmark.BenchmarkResults">deepsparse.benchmark.BenchmarkResults</a><a class="reference internal" href="_modules/deepsparse/engine.html#Engine.benchmark_loader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepsparse.engine.Engine.benchmark_loader" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience function for quickly benchmarking the instantiated model
on a give DataLoader in the DeepSparse Engine.
After executing, will return the summary statistics for benchmarking.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>loader</strong> – An iterator of inputs to pass to the engine for benchmarking.
The expected order of each input is as defined in the ONNX graph.</p></li>
<li><p><strong>num_iterations</strong> – The number of iterations to run benchmarking for.
Default is 20</p></li>
<li><p><strong>num_warmup_iterations</strong> – T number of iterations to warm up engine before
benchmarking. These executions will not be counted in the benchmark
results that are returned. Useful and recommended to bring
the system to a steady state. Default is 5</p></li>
<li><p><strong>include_inputs</strong> – If True, inputs from forward passes during benchmarking
will be added to the results. Default is False</p></li>
<li><p><strong>include_outputs</strong> – If True, outputs from forward passes during benchmarking
will be added to the results. Default is False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the results of benchmarking</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.engine.Engine.cpu_avx_type">
<em class="property">property </em><code class="sig-name descname">cpu_avx_type</code><a class="headerlink" href="#deepsparse.engine.Engine.cpu_avx_type" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The detected cpu avx type that neural magic is running with.
One of {avx2, avx512}. AVX instructions give significant execution speedup
with avx512 &gt; avx2.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.engine.Engine.cpu_vnni">
<em class="property">property </em><code class="sig-name descname">cpu_vnni</code><a class="headerlink" href="#deepsparse.engine.Engine.cpu_vnni" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if vnni support was detected on the cpu, False otherwise.
VNNI gives performance benefits for quantized networks.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.engine.Engine.mapped_run">
<code class="sig-name descname">mapped_run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inp</span><span class="p">:</span> <span class="n">List<span class="p">[</span>numpy.ndarray<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">val_inp</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; Dict<span class="p">[</span>str<span class="p">, </span>numpy.ndarray<span class="p">]</span><a class="reference internal" href="_modules/deepsparse/engine.html#Engine.mapped_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepsparse.engine.Engine.mapped_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run given inputs through the model for inference.
Returns the result as a dictionary of numpy arrays corresponding to
the output names of the model as defined in the ONNX graph.</p>
<p>Note 1: this function can add some a performance hit in certain cases.
If using, please validate that you do not incur a performance hit
by comparing with the regular run func</p>
<p>See &#64;run for more details on specific setup for the inputs.</p>
<div class="line-block">
<div class="line">Example:</div>
<div class="line-block">
<div class="line">engine = Engine(“path/to/onnx”, batch_size=1)</div>
<div class="line">inp = [numpy.random.rand(1, 3, 224, 224).astype(numpy.float32)]</div>
<div class="line">out = engine.mapped_run(inp)</div>
<div class="line">assert isinstance(out, Dict)</div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inp</strong> – The list of inputs to pass to the engine for inference.
The expected order is the inputs order as defined in the ONNX graph.</p></li>
<li><p><strong>val_inp</strong> – Validate the input to the model to ensure numpy array inputs
are setup correctly for the DeepSparse Engine</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The dictionary of outputs from the model after executing
over the inputs</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.engine.Engine.model_path">
<em class="property">property </em><code class="sig-name descname">model_path</code><a class="headerlink" href="#deepsparse.engine.Engine.model_path" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The local path to the model file the current instance was compiled from</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.engine.Engine.num_cores">
<em class="property">property </em><code class="sig-name descname">num_cores</code><a class="headerlink" href="#deepsparse.engine.Engine.num_cores" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The number of physical cores the current instance is running on</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.engine.Engine.num_sockets">
<em class="property">property </em><code class="sig-name descname">num_sockets</code><a class="headerlink" href="#deepsparse.engine.Engine.num_sockets" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The number of sockets the engine is compiled to run on;
only current support is 1</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.engine.Engine.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inp</span><span class="p">:</span> <span class="n">List<span class="p">[</span>numpy.ndarray<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">val_inp</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>numpy.ndarray<span class="p">]</span><a class="reference internal" href="_modules/deepsparse/engine.html#Engine.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepsparse.engine.Engine.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run given inputs through the model for inference.
Returns the result as a list of numpy arrays corresponding to
the outputs of the model as defined in the ONNX graph.</p>
<p>Note 1: the input dimensions must match what is defined in the ONNX graph.
To avoid extra time in memory shuffles, the best use case
is to format both the onnx and the input into channels first format;
ex: [batch, height, width, channels] =&gt; [batch, channels, height, width]</p>
<p>Note 2: the input type for the numpy arrays must match
what is defined in the ONNX graph.
Generally float32 is most common,
but int8 and int16 are used for certain layer and input types
such as with quantized models.</p>
<p>Note 3: the numpy arrays must be contiguous in memory,
use numpy.ascontiguousarray(array) to fix if not.</p>
<div class="line-block">
<div class="line">Example:</div>
<div class="line-block">
<div class="line">engine = Engine(“path/to/onnx”, batch_size=1, num_cores=None)</div>
<div class="line">inp = [numpy.random.rand(1, 3, 224, 224).astype(numpy.float32)]</div>
<div class="line">out = engine.run(inp)</div>
<div class="line">assert isinstance(out, List)</div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inp</strong> – The list of inputs to pass to the engine for inference.
The expected order is the inputs order as defined in the ONNX graph.</p></li>
<li><p><strong>val_inp</strong> – Validate the input to the model to ensure numpy array inputs
are setup correctly for the DeepSparse Engine</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The list of outputs from the model after executing over the inputs</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="deepsparse.engine.Engine.timed_run">
<code class="sig-name descname">timed_run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inp</span><span class="p">:</span> <span class="n">List<span class="p">[</span>numpy.ndarray<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">val_inp</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>List<span class="p">[</span>numpy.ndarray<span class="p">]</span><span class="p">, </span>float<span class="p">]</span><a class="reference internal" href="_modules/deepsparse/engine.html#Engine.timed_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepsparse.engine.Engine.timed_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method for timing a model inference run.
Returns the result as a tuple containing (the outputs from &#64;run, time take)</p>
<p>See &#64;run for more details.</p>
<div class="line-block">
<div class="line">Example:</div>
<div class="line-block">
<div class="line">engine = Engine(“path/to/onnx”, batch_size=1, num_cores=None)</div>
<div class="line">inp = [numpy.random.rand(1, 3, 224, 224).astype(numpy.float32)]</div>
<div class="line">out, time = engine.timed_run(inp)</div>
<div class="line">assert isinstance(out, List)</div>
<div class="line">assert isinstance(time, float)</div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inp</strong> – The list of inputs to pass to the engine for inference.
The expected order is the inputs order as defined in the ONNX graph.</p></li>
<li><p><strong>val_inp</strong> – Validate the input to the model to ensure numpy array inputs
are setup correctly for the DeepSparse Engine</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The list of outputs from the model after executing over the inputs</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="deepsparse.engine.analyze_model">
<code class="sig-prename descclassname">deepsparse.engine.</code><code class="sig-name descname">analyze_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>sparsezoo.objects.model.Model<span class="p">, </span>sparsezoo.objects.file.File<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">inp</span><span class="p">:</span> <span class="n">List<span class="p">[</span>numpy.ndarray<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">batch_size</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">num_cores</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">num_iterations</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">20</span></em>, <em class="sig-param"><span class="n">num_warmup_iterations</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">5</span></em>, <em class="sig-param"><span class="n">optimization_level</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">imposed_as</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">imposed_ks</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="_modules/deepsparse/engine.html#analyze_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepsparse.engine.analyze_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to analyze a model’s performance in the DeepSparse Engine.
The model must be defined in an ONNX graph and stored in a local file.
Gives defaults of batch_size == 1 and num_cores == None
(will use all physical cores available on a single socket).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – Either a path to the model’s onnx file, a sparsezoo Model object,
or a sparsezoo ONNX File object that defines the neural network
graph definition to analyze</p></li>
<li><p><strong>inp</strong> – The list of inputs to pass to the engine for analyzing inference.
The expected order is the inputs order as defined in the ONNX graph.</p></li>
<li><p><strong>batch_size</strong> – The batch size of the inputs to be used with the model</p></li>
<li><p><strong>num_cores</strong> – The number of physical cores to run the model on.
Pass None or 0 to run on the max number of cores
in one socket for the current machine, default None</p></li>
<li><p><strong>num_iterations</strong> – The number of times to repeat execution of the model
while analyzing, default is 20</p></li>
<li><p><strong>num_warmup_iterations</strong> – The number of times to repeat execution of the model
before analyzing, default is 5</p></li>
<li><p><strong>optimization_level</strong> – The amount of graph optimizations to perform.
The current choices are either 0 (minimal) or 1 (all), default is 1</p></li>
<li><p><strong>imposed_as</strong> – Imposed activation sparsity, defaults to None.
Will force the activation sparsity from all ReLu layers in the graph
to match this desired sparsity level (percentage of 0’s in the tensor).
Beneficial for seeing how AS affects the performance of the model.</p></li>
<li><p><strong>imposed_ks</strong> – Imposed kernel sparsity, defaults to None.
Will force all prunable layers in the graph to have weights with
this desired sparsity level (percentage of 0’s in the tensor).
Beneficial for seeing how pruning affects the performance of the model.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the analysis structure containing the performance details of each layer</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="deepsparse.engine.benchmark_model">
<code class="sig-prename descclassname">deepsparse.engine.</code><code class="sig-name descname">benchmark_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>sparsezoo.objects.model.Model<span class="p">, </span>sparsezoo.objects.file.File<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">inp</span><span class="p">:</span> <span class="n">List<span class="p">[</span>numpy.ndarray<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">batch_size</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">num_cores</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">num_iterations</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">20</span></em>, <em class="sig-param"><span class="n">num_warmup_iterations</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">5</span></em>, <em class="sig-param"><span class="n">include_inputs</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">include_outputs</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#deepsparse.benchmark.BenchmarkResults" title="deepsparse.benchmark.BenchmarkResults">deepsparse.benchmark.BenchmarkResults</a><a class="reference internal" href="_modules/deepsparse/engine.html#benchmark_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepsparse.engine.benchmark_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to benchmark a model in the DeepSparse Engine
from an ONNX file for inference.
Gives defaults of batch_size == 1 and num_cores == None
(will use all physical cores available on a single socket).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – Either a path to the model’s onnx file, a sparsezoo Model object,
or a sparsezoo ONNX File object that defines the neural network</p></li>
<li><p><strong>batch_size</strong> – The batch size of the inputs to be used with the model</p></li>
<li><p><strong>num_cores</strong> – The number of physical cores to run the model on.
Pass None or 0 to run on the max number of cores
in one socket for the current machine, default None</p></li>
<li><p><strong>inp</strong> – The list of inputs to pass to the engine for benchmarking.
The expected order is the inputs order as defined in the ONNX graph.</p></li>
<li><p><strong>num_iterations</strong> – The number of iterations to run benchmarking for.
Default is 20</p></li>
<li><p><strong>num_warmup_iterations</strong> – T number of iterations to warm up engine before
benchmarking. These executions will not be counted in the benchmark
results that are returned. Useful and recommended to bring
the system to a steady state. Default is 5</p></li>
<li><p><strong>include_inputs</strong> – If True, inputs from forward passes during benchmarking
will be added to the results. Default is False</p></li>
<li><p><strong>include_outputs</strong> – If True, outputs from forward passes during benchmarking
will be added to the results. Default is False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the results of benchmarking</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="deepsparse.engine.compile_model">
<code class="sig-prename descclassname">deepsparse.engine.</code><code class="sig-name descname">compile_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>sparsezoo.objects.model.Model<span class="p">, </span>sparsezoo.objects.file.File<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">batch_size</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">num_cores</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#deepsparse.engine.Engine" title="deepsparse.engine.Engine">deepsparse.engine.Engine</a><a class="reference internal" href="_modules/deepsparse/engine.html#compile_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepsparse.engine.compile_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to compile a model in the DeepSparse Engine
from an ONNX file for inference.
Gives defaults of batch_size == 1 and num_cores == None
(will use all physical cores available on a single socket).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – Either a path to the model’s onnx file, a sparsezoo Model object,
or a sparsezoo ONNX File object that defines the neural network</p></li>
<li><p><strong>batch_size</strong> – The batch size of the inputs to be used with the model</p></li>
<li><p><strong>num_cores</strong> – The number of physical cores to run the model on.
Pass None or 0 to run on the max number of cores
in one socket for the current machine, default None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The created Engine after compiling the model</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-deepsparse.lib">
<span id="deepsparse-lib-module"></span><h2>deepsparse.lib module<a class="headerlink" href="#module-deepsparse.lib" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="deepsparse.lib.init_deepsparse_lib">
<code class="sig-prename descclassname">deepsparse.lib.</code><code class="sig-name descname">init_deepsparse_lib</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/deepsparse/lib.html#init_deepsparse_lib"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepsparse.lib.init_deepsparse_lib" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-deepsparse.version">
<span id="deepsparse-version-module"></span><h2>deepsparse.version module<a class="headerlink" href="#module-deepsparse.version" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-deepsparse">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-deepsparse" title="Permalink to this headline">¶</a></h2>
<p>The DeepSparse package used to achieve GPU class performance
for Neural Networks on commodity CPUs.</p>
</div>
</div>


             </article>
             
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="deepsparse.utils.html" class="btn btn-neutral float-right" title="deepsparse.utils package" accesskey="n" rel="next">Next <img src="_static/images/chevron-right-orange.svg" class="next-page"></a>
      
      
    </div>
  

  

    <hr>

  

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Neural Magic.

    </p>
  </div>
    
      <div>
        Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
      </div>
     

</footer>

          </div>
        </div>

        <div class="pytorch-content-right" id="pytorch-content-right">
          <div class="pytorch-right-menu" id="pytorch-right-menu">
            <div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">deepsparse package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-deepsparse.benchmark">deepsparse.benchmark module</a></li>
<li><a class="reference internal" href="#module-deepsparse.cpu">deepsparse.cpu module</a></li>
<li><a class="reference internal" href="#module-deepsparse.engine">deepsparse.engine module</a></li>
<li><a class="reference internal" href="#module-deepsparse.lib">deepsparse.lib module</a></li>
<li><a class="reference internal" href="#module-deepsparse.version">deepsparse.version module</a></li>
<li><a class="reference internal" href="#module-deepsparse">Module contents</a></li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
      </section>
    </div>

  


  

     
       <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
         <script src="_static/jquery.js"></script>
         <script src="_static/underscore.js"></script>
         <script src="_static/doctools.js"></script>
     

  

  <script type="text/javascript" src="_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="_static/js/vendor/bootstrap.min.js"></script>
  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

  <!-- Begin Footer -->

  <div class="container-fluid" id="docs-tutorials-resources">
    <div class="container">
      <div class="row">
        <!--
        <div class="col-md-4 text-center">
          <h2>Docs</h2>
          <p>Access comprehensive developer documentation for PyTorch</p>
          <a class="with-right-arrow" href="https://pytorch.org/docs/stable/index.html">View Docs</a>
        </div>

        <div class="col-md-4 text-center">
          <h2>Tutorials</h2>
          <p>Get in-depth tutorials for beginners and advanced developers</p>
          <a class="with-right-arrow" href="https://pytorch.org/tutorials">View Tutorials</a>
        </div>

        <div class="col-md-4 text-center">
          <h2>Resources</h2>
          <p>Find development resources and get your questions answered</p>
          <a class="with-right-arrow" href="https://pytorch.org/resources">View Resources</a>
        </div>
        -->
      </div>
    </div>
  </div>


  <!-- <footer class="site-footer">
    <div class="container footer-container">
      <div class="footer-logo-wrapper">
        <a href="https://github.com/mpariente/asteroid" class="footer-logo"></a>
      </div>

      <div class="footer-links-wrapper">

        <div class="footer-logo-col">
          <img class="footer-logo-img" src="_static/images/dark_asteroid_logo.svg"/>
        </div>

        <div class="footer-links-col">
          <ul>
            <li class="list-title"><a href="https://github.com/mpariente/asteroid">Asteroid</a></li>
            <li><a href="https://pytorch.org/get-started">Get Started</a></li>
            <li><a href="https://pytorch.org/features">Features</a></li>
            <li><a href="">Ecosystem</a></li>
            <li><a href="https://pytorch.org/blog/">Blog</a></li>
            <li><a href="https://pytorch.org/resources">Resources</a></li>
          </ul>
        </div>

        <div class="footer-links-col">
          <ul>
            <li class="list-title"><a href="https://pytorch.org/support">Support</a></li>
            <li><a href="https://pytorch.org/tutorials">Tutorials</a></li>
            <li><a href="https://pytorch.org/docs/stable/index.html">Docs</a></li>
            <li><a href="https://discuss.pytorch.org" target="_blank">Discuss</a></li>
            <li><a href="https://github.com/mpariente/asteroid/issues" target="_blank">Github Issues</a></li>
            <li><a href="" target="_blank">Slack</a></li>
            <li><a href="https://github.com/mpariente/asteroid/blob/master/CONTRIBUTING.md" target="_blank">Contributing</a></li>
          </ul>
        </div>

        <div class="footer-links-col follow-us-col">
          <ul>
            <li class="list-title">Follow Us</li>
            <li>
              <div id="mc_embed_signup">
                <form
                  action="https://twitter.us14.list-manage.com/subscribe/post?u=75419c71fe0a935e53dfa4a3f&id=91d0dccd39"
                  method="post"
                  id="mc-embedded-subscribe-form"
                  name="mc-embedded-subscribe-form"
                  class="email-subscribe-form validate"
                  target="_blank"
                  novalidate>
                  <div id="mc_embed_signup_scroll" class="email-subscribe-form-fields-wrapper">
                    <div class="mc-field-group">
                      <label for="mce-EMAIL" style="display:none;">Email Address</label>
                      <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email Address">
                    </div>

                    <div id="mce-responses" class="clear">
                      <div class="response" id="mce-error-response" style="display:none"></div>
                      <div class="response" id="mce-success-response" style="display:none"></div>
                    </div>

                    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_75419c71fe0a935e53dfa4a3f_91d0dccd39" tabindex="-1" value=""></div>

                    <div class="clear">
                      <input type="submit" value="" name="subscribe" id="mc-embedded-subscribe" class="button email-subscribe-button">
                    </div>
                  </div>
                </form>
              </div>

            </li>
          </ul>

          <div class="footer-social-icons">
            <a href="" target="_blank" class="facebook"></a>
            <a href="https://twitter.com" target="_blank" class="twitter"></a>
          </div>
        </div>

      </div>
    </div>
  </footer> -->


  <!-- End Footer -->

  <!-- Begin Mobile Menu -->

  <div class="mobile-main-menu">
    <div class="container-fluid">
      <div class="container">
        <div class="mobile-main-menu-header-container">
          <a class="header-logo" href="https://github.com/mpariente/asteroid" aria-label="PyTorch Lightning"></a>
          <a class="main-menu-close-button" href="#" data-behavior="close-mobile-menu"></a>
        </div>
      </div>
    </div>

    <div class="mobile-main-menu-links-container">
      <div class="main-menu">
        <ul>
          <li>
            <a href="https://pytorch.org/get-started">Get Started</a>
          </li>

          <li>
            <a href="https://pytorch.org/features">Features</a>
          </li>

          <li>
            <a href="https://pytorch.org/blog/">Blog</a>
          </li>

          <li>
            <a href="https://pytorch.org/tutorials">Tutorials</a>
          </li>

          <li>
            <a href="https://pytorch.org/docs/stable/index.html">Docs</a>
          </li>

          <li>
            <a href="https://pytorch.org/resources">Resources</a>
          </li>

          <li>
            <a href="https://github.com/mpariente/asteroid">Github</a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- End Mobile Menu -->

  <script type="text/javascript" src="_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      pytorchAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>
</html>